---
layout: default
nav: tutorial
---

<div class="container">

  <div class="row">
    <div class="col-md-12">

      <h1>History Support</h1>

      <p>This example demonstrates history support in intercooler.</p>

      <p>As you click between the tabs, the URL and history will be updated correctly, allowing back button
      support</p>

      <ul>
        <li>
          The <code>content</code> div tells Intercooler that it should be snap-shotted for history, rather than the
          body of the page, by using the
          <a href="/attributes/ic-history-elt.html"><code>ic-history-elt</code></a>
          attribute.  The element that is snap-shotted for history should be stable across your entire site
          so that the UI can be reliably restored.
        </li>
        <li>
          The navigation tabs parent UL targets a div with the
          <a href="/attributes/ic-target.html"><code>ic-target</code></a>
          attribute.  This div encloses both the tabs and content, allowing the server side to render
          a new tab state as well as the new content.  The ul

        </li>
        <li>
          The server side gets the make that was selected in the input via a request parameter and renders an select
          with all the models available for that make.
        </li>
      </ul>

      <div>
        <ul class="demo-nav nav nav-pills">
          <li role="presentation" class="active"><a href="#demo" aria-controls="demo" role="tab" data-toggle="tab">Live
            Demo</a></li>
          <li role="presentation"><a href="#code" aria-controls="demo" role="tab" data-toggle="tab">Source Code</a></li>
        </ul>
      </div>

      <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="demo">

  <div id="content" ic-history-elt>
    <ul class="nav nav-tabs" ic-target="#content" ic-push-url="true">
      <li class="active"><a ic-get-from="/examples/history/tab1">Tab1</a></li>
      <li><a ic-get-from="/examples/history/tab2">Tab2</a></li>
      <li><a ic-get-from="/examples/history/tab3">Tab3</a></li>
    </ul>
    <h1>Tab 1</h1><a ic-post-to="/click_me">Click Me!</a>
  </div>

  <script>

    //========================================================================
    // Mock Server-Side HTTP End Point
    //========================================================================
    $.mockjax({
      url: "/examples/history/tab1",
      response: function (settings) {
        this.responseText = tabUITemplate(1);
      }
    });
    $.mockjax({
      url: "/examples/history/tab2",
      response: function (settings) {
        this.responseText = tabUITemplate(2);
      }
    });
    $.mockjax({
      url: "/examples/history/tab3",
      response: function (settings) {
        this.responseText = tabUITemplate(3);
      }
    });
    $.mockjax({
      url: "/click_me",
      response: function (settings) {
        this.responseText = "You clicked me!";
      }
    });

    //========================================================================
    // Mock Server-Side Templates
    //========================================================================
    function tabUITemplate(tab) {
      return '\
   <div id="content">\
        <ul class="nav nav-tabs" ic-target="#content" ic-push-url="true">\
        <li ' + (tab == 1 ? 'class="active"' : '') + '><a ic-get-from="/examples/history/tab1">Tab1</a></li>\
        <li ' + (tab == 2 ? 'class="active"' : '') + '><a ic-get-from="/examples/history/tab2">Tab2</a></li>\
        <li ' + (tab == 3 ? 'class="active"' : '') + '><a ic-get-from="/examples/history/tab3">Tab3</a></li>\
        </ul>\
        <h1>Tab ' + tab + '</h1><a ic-post-to="/click_me">Click Me!</a> \
      </div>\
      '
    }

  </script>
  </div>
        <div role="tabpanel" class="tab-pane" id="code">
          <pre id="src-pre"></pre>
        </div>
      </div>

    </div>
    <script>
      $("#src-pre").text($("#demo").html());
    </script>

  </div>
</div>
