---
layout: default
nav: examples
---
<script>

  //---------------------------------------------------------------------------------
  // This is all junk to simulate an actual remote server
  //---------------------------------------------------------------------------------
  var counter = 1;
  setInterval(function () {
    counter++;
  }, 2500);

  var clicks = 0;

  function paramsToHash(str) {
    var searchString = str,
        params = searchString.split("&"),
        hash = {};

    if (searchString == "") return {};
    for (var i = 0; i < params.length; i++) {
      var val = params[i].split("=");
      hash[unescape(val[0])] = unescape(val[1]);
    }
    return hash;
  }

  var firstName = "";
  var lastName = "";

  Intercooler.setRemote({
    get: function (url, callback) {
      if (url == "/polling_div") {
        callback("<div ic-src='/polling_div' ic-poll='1s'>Sample Polling Div.  Value is " + counter + "</div>")
      }
      if (url == "/manual_div") {
        callback("<div id='manual-update' ic-src='/manual_div'>Sample Manual Div.  Value is " + counter + "</div>")
      }
      if (url == "/dependency_div") {
        callback("<div ic-src='/dependency_div'>Sample Dependency Dectection. You have clicked " + clicks + " times</div>")
      }
      if (url == "/progress_bar") {
        callback((counter % 12) / 12 * 100 + "%")
      }
      if (url == "/attr_update") {
        if(counter % 3 == 0) {
          callback("");
        } else if(counter % 3 == 1) {
          callback("font-style:italic");
        } else {
          callback("font-weight:bold");
        }
      }
      if(url == "/contacts/1/info_div") {
        callback("<div ic-src='/contacts/1/info_div' ic-deps='/contacts/1'>Hello " + firstName + " " + lastName + "</div>");
      }
    },
    post : function(url, data, callback) {
      if (url == "/dependency_div") {
        clicks++;
        callback("");
      }
      if (url == "/contacts/1/first_name") {
        firstName = paramsToHash(data)['first_name'];
        callback("");
      }
      if (url == "/contacts/1/last_name") {
        lastName = paramsToHash(data)['last_name'];
        callback("");
      }
      if (url == "/contacts/2/email") {
        var email = paramsToHash(data)['email'];
        if(/\S+@\S+\.\S+/.test(email)){
          callback('<div class="form-group" ic-post-to="/contacts/2/email"  ic-transition="none">' +
                     '<label>Enter An Email</label>' +
                     '<input type="text" name="email" class="form-control" placeholder="Enter An Email" value="' + email + '">' +
                   '</div>');
        } else {
          callback('<div class="form-group has-error" ic-post-to="/contacts/2/email" ic-transition="none">' +
                     '<label>Enter An Email</label>' +
                     '<input type="text" name="email" class="form-control" placeholder="Enter An Email" value="' + email + '">' +
                     '<span class="help-block">Please enter a valid email.</span>' +
                   '</div>');
        }
      }
    }
  });

</script>

<div class="container">

  <div class="row">
    <div class="col-md-12">
      <h2>Intercooler.JS Examples</h2>
      <p>Below are some examples of Intercooler functionality, each with a working demo below the code sample.</p>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">

      <h3>Polling</h3>
      <p>This is a simple div that polls an http endpoint for updates every 1 second</p>

      <h4>Code</h4>
      <pre>
  &lt;div ic-src="/polling_div" ic-poll="1s">Sample Polling Div. Value is 0&lt;/div>
      </pre>

      <h4>Live Example</h4>

      <div ic-src="/polling_div" ic-poll="1s">Sample Polling Div. Value is 0</div>
    </div>
  </div>

  <hr/>

  <div class="row">
    <div class="col-md-12">
      <h3>Manual Update</h3>

      <p>This is a div that is refreshed explicitly using events and the Intercooler library</p>

      <h4>Code</h4>
      <pre>

  &lt;div id="manual-update" ic-src="/manual_div">Sample Manual Div. Value is 0&lt;/div>
  &lt;button onclick="Intercooler.refresh($('#manual-update'));">Update It!&lt;/button>
      </pre>

      <h4>Live Example</h4>

      <div id="manual-update" ic-src="/manual_div">Sample Manual Div. Value is 0</div>
      <button class="btn btn-primary" onclick="Intercooler.refresh($('#manual-update'));">Update It!</button>
    </div>
  </div>

  <hr/>

  <div class="row">
    <div class="col-md-12">
      <h3>Dependency Detection</h3>

      <p>This is a div that is refreshed automatically when the button is clicked due to the fact that it depends
      on a URL that the button targets for update.</p>

      <h4>Code</h4>
      <pre>

        &lt;div ic-src="/dependency_div">Sample Dependency Dectection. You have clicked 0 times&lt;/div>
        &lt;button ic-post-to="/dependency_div">Increment Counter&lt;/button>
      </pre>

      <h4>Live Example</h4>

      <div ic-src="/dependency_div">Sample Dependency Dectection. You have clicked 0 times</div>
      <button class="btn btn-primary" ic-post-to="/dependency_div">Increment Counter</button>
    </div>
  </div>

  <hr/>

  <div class="row">
    <div class="col-md-12">
      <h3>CSS Value Targeting</h3>

      <p>You may want to target the value of an style attribute with an endpoint for a smoother UI experience.  Below is an
        example targeting the 'width' attribute of the style on the progress bar, allowing for smooth easing as it updates.</p>

      <h4>Code</h4>
      <pre>

  &lt;div class="progress progress-striped active">
    &lt;div class="progress-bar" ic-style-src="width:/progress_bar" ic-poll="2s" style="width:1%">&lt;/div>
  &lt;/div>
      </pre>

      <h4>Live Example</h4>

      <div class="progress progress-striped active">
        <div class="progress-bar" ic-style-src="width:/progress_bar" ic-poll="2s" style="width:1%"></div>
      </div>
    </div>
  </div>

  <hr/>

  <div class="row">
    <div class="col-md-12">
      <h3>Attribute Value Targeting</h3>

      <p>You may want to target the value of an attribute with an endpoint for a smoother UI experience.  Below
      we update the entire style block of the element</p>
      <h4>Code</h4>
      <pre>

  &lt;div class="progress progress-striped active">
    &lt;div class="progress-bar" ic-attr-src="style:/attr_update" ic-poll="2s" style="width:1%">Here is some text!&lt;/div>
  &lt;/div>
      </pre>

      <h4>Live Example</h4>

     <div ic-attr-src="style:/attr_update" ic-poll="2s">Here is some text!</div>
    </div>
  </div>

  <hr/>

  <div class="row">
    <div class="col-md-12">
      <h3>Input Binding Example</h3>

      <p>This example binds two inputs to two different endpoints.  The div below them then depends on a parent path, but sources from
        a different URL.  When you change the value in the inputs (tab out) the div below will update.</p>

      <h4>Code</h4>
      <pre>
  &lt;form role="form">
    &lt;div class="form-group">
      &lt;label>First Name&lt;/label>
      &lt;input type="text" name="first_name" class="form-control" placeholder="Enter Your First Name" ic-post-to="/contacts/1/first_name">
    &lt;/div>
    &lt;div class="form-group">
      &lt;label>Last Name&lt;/label>
      &lt;input type="text" name="last_name" class="form-control" placeholder="Enter Your Last Name" ic-post-to="/contacts/1/last_name">
    &lt;/div>
  &lt;/form>
  &lt;div ic-src="/contacts/1/info_div" ic-deps="/contacts/1">Nothing Entered Yet...&lt;/div>
      </pre>

      <h4>Live Example</h4>
      <form role="form">
        <div class="form-group">
          <label>First Name</label>
          <input type="text" name="first_name" class="form-control" placeholder="Enter Your First Name" ic-post-to="/contacts/1/first_name">
        </div>
        <div class="form-group">
          <label>Last Name</label>
          <input type="text" name="last_name" class="form-control" placeholder="Enter Your Last Name" ic-post-to="/contacts/1/last_name">
        </div>
      </form>
      <div ic-src="/contacts/1/info_div" ic-deps="/contacts/1">Nothing Entered Yet...</div>
    </div>
  </div>

  <hr/>

  <div class="row">
    <div class="col-md-12">
      <h3>Input Validation Example</h3>

      <p>Intercooler.js makes it easy to do incremental inline form element validations against your server.  Below
      is an example that will only allow properly formatted emails.</p>

      <h4>Code</h4>
      <pre>
  &lt;div class="form-group" ic-post-to="/contacts/2/email" ic-transition="none">
    &lt;label>Enter An Email&lt;/label>
    &lt;input type="text" name="email" class="form-control" placeholder="Enter An Email">
  &lt;/div>
      </pre>

      <h4>Live Example</h4>
      <form role="form">
        <div class="form-group" ic-post-to="/contacts/2/email" ic-transition="none">
          <label>Enter An Email</label>
          <input type="text" name="email" class="form-control" placeholder="Enter An Email">
        </div>
      </form>
    </div>
  </div>

  <div class="row">
  <div class="col-md-12">
  <h2>Examples</h2>

  <p>Here are some examples of intercooler in action.</p>


  <h3>Polling Update</h3>

  <p>This example shows a div that polls a URL for updates.</p>

        <pre>
  &lt;div ic-src="/visitors/count_div" ic-poll="2s">
    You have had 42 visitors today
  &lt;/div>
</pre>

  <p>It will poll the given URL, <code>/visitors/count_div/</code> by issuing an AJAX <code>GET</code>
    every two seconds.</p>

  <p>Here is an example of a returned fragment from <code>GET /visitors/count_div/</code>:</p>

  <div class="row">
      <pre>
    You have had 103 visitors today
</pre>
  </div>

  <p>Here is the div in action (be patient, sometimes no new visitors show up so it won't update on every 2 second interval):</p>

  <div class="live-demo">
    <script>
      (function () {
        var count = 42;
        $.mockjax({
          url: '/visitors/count_div',
          response: function () {
            if(Math.random() > .5) {
              count += Math.floor(Math.random() * 6);
            }
            this.responseText = 'You have had ' + count + ' visitors today';
          }
        });
      })();
    </script>
    <div ic-src="/visitors/count_div">You have had 42 visitors today</div>
  </div>

  <h3>A Trigger + Dependencies Example</h3>

  <p>The example above is passive: it polls the URL without any user input.  Let's make it respond to a button
    click instead, and introduce our first dependency example:</p>

  <div class="row">
        <pre>
  &lt;div ic-src="/example/click">
    You have not yet clicked the button
  &lt;/div>

  &lt;button ic-post-to="/example/click">
    Click Me!
  &lt;/button>
</pre>
  </div>

  <p>Here we've removed the <code>ic-poll</code> attribute and introduced a button with a , <code>ic-post-to</code>.
    The server receives the post and increments a server-side counter of the number of times
    you have clicked the button.</p>

  <p>When the button is clicked, Intercooler detects that the div <em>depends</em>
    on the URL that the button posted to, and so it automatically does a refresh, issuing a <code>GET</code>
    and swapping any new content into the div.<p>

  <div class="live-demo">
    <script>
      (function () {
        var clicks = 0;
        $.mockjax({
          url: '/example/click',
          response: function (settings) {
            if(settings.type == "GET") {
              this.responseText = 'You have clicked the button ' + clicks + ' times';
            } else {
              clicks++;
            }
          }
        });
      })();
    </script>
    <div ic-src="/example/click">You have not yet clicked the button</div>
    <button class="btn btn-primary" ic-post-to="/example/click">Click Me!</button>
  </div>

  <h3>Adding Input</h3>

  <p>In this example we will make things a bit more interactive by allowing the user to enter an item name that
    will be uploaded to the server.</p>

  <div class="row">
        <pre>
  &lt;div ic-src="/name">
    No name entered
  &lt;/div>

  &lt;input id="a_name" type="text" name="name" placeholder="Enter A Name"/>

  &lt;button ic-post-to="/name" ic-include="#a_name">
    Upload Name
  &lt;/button>
</pre>
  </div>

  <p>We are targeting a new URL, <code>/name</code> and we've added the <code>ic-include</code>
    attribute, which includes the input <code>#a_name</code> name and value in the POST that is
    submitted by the button.</p>

  <div class="live-demo">
    <script>
      (function () {
        var name = "";
        $.mockjax({
          url: '/name',
          response: function (settings) {
            if(settings.type == "GET") {
              if(name == "") {
                this.responseText = 'No name entered';
              } else {
                this.responseText = 'You entered the name: ' + name + '';
              }
            } else {
              var params = parseParams(settings.data)
              name = params['name'];
            }
          }
        });
      })();
    </script>
    <div ic-src="/name">No name entered</div>
    <input id="a_name" type="text" name="name" placeholder="Enter A Name"/>
    <button class="btn btn-primary" ic-post-to="/name" ic-include="#a_name">Upload Name</button>
  </div>

  <h3>Switching To UL</h3>

  <p>In this example we will switch the target from a div swap to a list prepend, using intercooler's
    <a href="/attributes/ic-prepend-from.html"><code>ic-prepend-from</code></a> attribute</p>

  <div class="row">
        <pre>
  &lt;input id="item_name" type="text" name="item_name" placeholder="Enter Item Name"/>
  &lt;button ic-post-to="/items" ic-include="#item_name">Upload Name&lt;/button>
  &lt;ul ic-prepend-from="/items" ic-limit-children="3">
    &lt;li>Placeholder&lt;/li>
  &lt;/ul>
        </pre>
  </div>

  <p>As before, we are passing up the item
    name via the <code>ic-include</code> attribute, and we are limiting the number of children in the list
    to a total of 3 with the <code>ic-limit-children</code> attribute:</p>

  <div class="live-demo">
    <script>
      (function () {
        var items = [];
        $.mockjax({
          url: '/items',
          response: function (settings) {
            if(settings.type == "GET") {
              var str = items.map(function(str) { return "<li>" + str + "</li>"}).join("\n")
              items = [];
              this.responseText =  str;
            } else {
              var params = parseParams(settings.data);
              items.push(params['item_name']);
            }
          }
        });
      })();
    </script>
    <input id="item_name" type="text" name="item_name" placeholder="Enter Item Name"/>
    <button class="btn btn-primary" ic-post-to="/items" ic-include="#item_name">Upload Name</button>
    <ul ic-prepend-from="/items" ic-limit-children="3">
      <li>Placeholder</li>
    </ul>
  </div>

  <h3>Implementing A Dynamic Progress Bar</h3>

  <p>Finally, lets finish with a relatively complicated example: a job-monitoring UI</p>

  <p>To do this, we will use Intercooler's <code>ic-style-src</code> attribute, which allows us to bind
    a style property to a URL.  The UI will first start of with a placeholder div.  When the button is clicked,
    the job will start, replacing the div with a progress bar.  When the job completes, the original placeholder
    div will return.</p>

  <p>We will start with the following code:</p>

  <div class="row">
        <pre>
        &lt;button class="btn btn-primary" ic-post-to="/job">Start Job&lt;/button>
        &lt;div ic-src="/job">Job Not Running...&lt;/div>
        </pre>
  </div>

  <p>Pretty simple: a div and a button that are both tied to the same URL.  Remember, this means that
    the div depends on the button, and it will be refreshed after the button is clicked.</p>

  <p>When the button is clicked a (simulated) job is kicked off.  When a request for the div is made, the
    following HTML fragment is returned:</p>

  <div class="row">
        <pre>
  Job Running:
  &lt;div class="progress progress-striped active">
    &lt;div class="progress-bar"
         ic-style-src="width:/job/percent_complete"
         ic-poll="1s" style="width:0%">&lt;/div>
  &lt;/div>
          </pre>
  </div>

  <p>
    This HTML is swapped in for the body of the div, and includes a Bootstrap-based progress bar.  The <code>width</code>
    style attribute of the progress bar is tied to the <code>/job/percent_complete</code> URL using the <code>ic-style-src</code>
    directive, which it polls ever second.  That URL will return values like <code>37%</code> and <code>78%</code>,
    which will update the width of the progress bar.
  </p>

  <p>
    When the job is finished the request to <code>/job/percent_complete</code> includes a
    <a href="responses.html#http_headers">Intercooler HTTP Header</a> directive telling Intercooler to refresh all elements that
    depend on the <code>/job</code> path, which refreshes the parent div and removes the progress bar.
  </p>

  <p>Here is the code in action:</p>

  <div class="live-demo">
    <script>
      (function () {
        var process = null;

        // simulate job endpoint
        $.mockjax({
          url: '/job',
          response: function (settings) {
            if(settings.type == "GET") {
              if(process != null) {
                this.responseText = 'Job Running:' +
                  '  <div class="progress progress-striped active">' +
                  '   <div class="progress-bar" ic-style-src="width:/job/percent_complete" ic-poll="1s" style="width:0%"></div>' +
                  '  </div>'
              } else {
                this.responseText = 'Job Complete!'
              }
            } else {
              process = 0;
            }
          }
        });

        // simulate percent complete endpoint
        $.mockjax({
          url: '/job/percent_complete',
          response: function () {
            if (process != null && process < 100) {
              process += Math.min(100, Math.floor(33 * Math.random()));
              this.responseText = process + "%";
            } else {
              process = null;
              this.headers = {
                "X-IC-Refresh": "/job"
              };
            }
          }});
      })();
    </script>
    <button class="btn btn-primary" ic-post-to="/job">Start Job</button>
    <div ic-src="/job">Job Not Running...</div>
  </div>


  <h3>On To The Docs...</h3>

  <p>That gives you a good overview of intercooler and what you can accomplish.  You can read about all the
    attributes <a href="/attributes/all.html">here</a>, response tricks <a href="/attributes/responses.html">here</a>, and the javascript API <a href="http://intercoolerjs.org/extending.html">here</a>.</p>

  <h3><a href="/tutorials/">Want more examples?  Check out the tutorials &rarr;</a></h3>

  </div>
  </div>

</div>